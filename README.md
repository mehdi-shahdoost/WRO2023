# WRO2023
The objective of  qualifying part is to rotate in the specified direction around the field. For that We used a DC motor and a servo motor to move the robot. The DC motor is responsible for the movement of the rear wheels and, as a result, the overall movement of the robot. After some research’s and the tests taken and Robot troubleshooting, we came to the conclusion that the best way to divide the power of the mo¬tor between the two rear wheels is to use a differential, and due to the need for high friction, we made the wheels connected to the rear motor wider than the steering wheels in order to have a smoother movement and less vibration of the robot.
rpi.gpio, cv2, time, pi camera and pi camera.array libraries are used in the program.
•	Cv2  is used for image processing which gives the data from raspberry pi camera and can locate the objects and also the distance from walls.
•	Rpi.gpio is used to take advantage of the raspberry pi gpio pins. This pins will help us to make a connection between our program and the coding algorithm to our electrical components such as our dc motor, servo motor and also our color sensor. Using the gpio pins we can transfer and recive digital signals to and from our hard wares and sensors.
•	Time is used for timing applications which plays an important role in our algorithm
•	Pi camera is used to use the Raspberry Pi camera and using this module we can access to data that our camera sends towards us.
Our programming system is such that the image is read from the Raspberry Pi camera in rate of 32 frames per second then we turn our RGB image into grayscale so we can easily detect the distance between our robot to the mat walls. Since the walls are darker than the entire field, we could easily detect walls by just filtering the darker pixels in our greyscale image using a thresh hold. Also, we divided the output threshold into 3 sections, the left part, the right part and the center part of the threshold using that we could measure our distance from the left wall and from the right wall and also, we from the frontier wall using the area which black pixels occupy in different part of the thresh hold. We use that information to adjust our direction and not to Colliding with the walls. We use the center part of the threshold to detect when we reach the end of the field so we can turn.
To detect obstacles, we again use the color detection method by the camera, in this way, we look for red and green colors in the image received from the camera. We can also detect the distance of the obstacle again by measuring the surface occupied by certain color from the camera and execute the desired movement. If we detect both red and green color or if we detect two obstacles with same color, we consider the closer obstacle as the main obstacle to handle. If a red obstacle is detected the program finds the center of the obstacle in unit of pixels. If the center of red obstacle is in the right section of the input image the robot takes an action and adjust the steering wheel so the robot can cross the red obstacle from correct side. If the center of red obstacle is in the left section of the input image the robot takes no action because no action is required and the robot can cross the obstacle correctly No need to change the direction of movement. Also, if a green obstacle is detected the program finds the center of the obstacle in unit of pixels. If the center of green obstacle is in the left section of the input image the robot takes an action and adjust the steering wheel so the robot can cross the green obstacle from correct side. If the center of green obstacle is in the right section of the input image the robot takes no action because no action is required and the robot can cross the obstacle correctly No need to change the direction of movement.
The color sensor also plays an important role in our designed solution. At first we wanted to use the camera to detect the ground lines but detecting the ground lines using the camera was not an easy task because it can cause so much problem such as detecting obstacles instead of lines or not detecting the order of blue and orange line because of the different position of the robot in different conditions. So we decide to use a color sensor in the bottom of the vehicle so it can detect the blue and orange lines on the ground in true order. Detecting ground lines are important in different ways. First of all we use them to detect what is the direction of the round whether its clockwise or counter clockwise. If sensor detects blue line first it means that the direction of the round is counter clockwise and if the orange line spotted first it means that we should turn in clockwise direction. Also another important task of the color sensor is to detect How many laps did the robot go around the racetrack. If 12 blue lines detected by the sensor it means that the robot did 3 laps and should stop in few seconds. One of the major issues using the color sensor is calibration of the sensor. Due to different light condition of the game fields the color sensor must have been calibrated with different light conditions.
The servo motor has a limited rotational movement, which is one of the best options for the steering angle, but the problem was that what we needed was a movement to the left and right, to solve this problem with the rotational movement of the servo. By moving the motor down with the help of a number of gears, and then by connecting the last gear to a rack and by connecting the wheels to the axle on that rack, we were able to convert the rotary movement of the servo into left and right movement by receiving information from The Raspberry Pi and with the help of the servo motor enters the power to the gears and adjusts the desired angle and with the help of this method it performs the qualifying part and receives the information from the camera in the final part and with the help of the servo motor We cross the obstacles at the desired angle.
To run the main Dc motor that is responsible for the movement of the vehicle we use an NPN transistor (13007) which is suitable for our design. We connected the signal output from raspberry pi using a 100 ohm resistor to the base of the transistor and we use the collector and emitter to run and stop our motor. The most important part of the design is to chose the correct transistor suitable with signal voltage and capable of tolerate dc motor voltage and current.
The design of the robot is such that the main part of the electronics are at the top of the robot so it is easy to access and can easily changed if needed. And also the weight of the vehicle leaning towards the back of the robot so the robot would not slip in the game field.
